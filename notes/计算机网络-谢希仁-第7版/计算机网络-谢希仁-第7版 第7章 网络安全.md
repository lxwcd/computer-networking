**第 7 章 网络安全**  
  
# 防火墙  
- 防火墙（firewall）是一种访问控制技术  
- 防火墙是一种特殊编程的路由器  
- 安装在网点和网络的其余部分  
- 通过指制定一些访问控制策略来限制进出网络的分组，从而减少入侵  
  
## 防火墙技术分类  
- 通常将两种方法结合使用  
  
### 分组过滤路由器  
- 有分组过滤功能的路由器  
- 根据过滤规则对进出内部网络的分组执行转发或丢弃  
- 过滤规则主要基于 OSI 七层协议的第 2、3、4 层数据包的首部信息  
- 如对目的端口号为 23（TELNET）的**入分组（incoming packet）**阻拦，  
  则外部网络不能使用 TELNET 登录内网的主机  
  或者将目的端口为 111 的**出分组（outgoing packet）**阻拦，使其无法发送到互联网  
- 分组过滤可以是**无状态**的，即独立处理每个分组  
- 分组过滤也可以是有状态的，即跟踪每个连接或会话的通信状态，并根据这些信息绝对是否转发分组  
  如一个目的端口是某个客户端动态分配的端口，则其允许进入网络的唯一条件是该分组是该端口发出  
  合法请求的一个响应，这种过滤需要检查状态  
  
缺点：  
- 不能对高层的数据过滤  
  如不能禁止某个用户对某个特定应用进行某个特定的操作  
- 不支持应用层用户鉴别  
  
  
### 应用网关（代理服务器）  
- 代理服务器（proxy server）  
- 代理服务器在应用层通信中扮演**中继**的角色  
- 一种网络应用需要一个应用网关  
- 可以实现基于应用层的过滤和高层用户鉴别  
  如邮件网关检查邮件时，可能检查报文的内容中是否有一些关键词来判断能否通过防火墙  
  
缺点：  
- 应用层转发和处理报文会增加负担  
- 对应用层不透明，需要在应用程序客户端配置应用网关地址  
  
  
# 入侵检测系统（IDS）  
- 防火墙不可能阻止全部的入侵  
- 如果入侵已经发生但还未造成严重的危害，需要能即使检测到入侵以便尽快阻止  
- IDS（Intrusion Detection Systems）最网络分组进行深度检查，发现可疑时向  
  网络管理员发出警告或执行阻断  
- 由于 IDS “误报”率较高，因此一般不执行自动阻断  
- IDS 能检测多种网络攻击，如网络映射、端口扫描、DoS攻击、蠕虫和病毒、系统漏洞攻击等  
    
## 入侵检测方法  
- 如果“误报”率太大而导致大量虚假警报，网络管理员需要花费大量时间分析警报  
  
  
### 基于特征的入侵检测  
- 维护所有**已知的**攻击标志性特征的数据库  
- 每个特征是一个与某种入侵活动相关联的规则集  
  如单个分组的首部字段值，或数据中的特定比特串  
  当发现有与某种攻击特征匹配的分组或分组序列时，则认为可能检测到某种入侵行为  
  （如犯罪心理中的侧写师，分析很多某类连环杀手的特征行为等总结规律和经验）  
- 这些特征和规律通常由网络安全专家生成，机构的网络管理员定制并将其加入到数据库中  
  
缺点：  
- 只能检测已知攻击，对于未知攻击束手无策  
  
### 基于异常的入侵检测  
- 观察正常运行的网络流量，学习正常流量的统计特性和规律  
- 当检测到网络中的某种流量的统计规律不符合正常情况时，认为可能发生了入侵行为  
  如攻击者在对内网主机进行 ping 搜索时，导致 ICMP ping 报文突然大量增加，  
  与正常的统计规律不同  
- 这种方式比较困难  
  
  
  
*************************  
补充知识  
  
# 入侵防御系统（IPS）  
> [IDS vs IPS vs Firewall – Know the Difference](https://ipwithease.com/firewall-vs-ips-vs-ids/)  
> [Firewalls, IDS, and IPS Explanation and Comparison](https://study-ccna.com/firewalls-ids-ips-explanation-comparison/)  
  
- intrusion prevention system  
- 一般最外层先是防火墙，通过防火墙再通过 IPS检测  
  
  
# 防水墙  
- 防止内部信息泄露的安全产品  
- 利用透明的加解密、身份认证等限制敏感信息的违规外传、破坏  
- 完整记录涉及敏感信息的操作日志，以便日后审计  
